---
import { getCollection } from "astro:content";
import ProjectCard from "../ProjectCard.astro";
import { useTranslations } from "../../i18n/useTranslations";
import StandardSection from "../layouts/StandardSection.astro";
import NotFoundMessage from "../ui/NotFoundMessage.astro";

const projects = await getCollection("projects");

const locale = Astro.currentLocale ?? "en";

const t = useTranslations(locale!);
---

<StandardSection>
  <h2 class="text-2xl text-center md:text-left font-bold text-primary">
    {t("home.projects")["commercialTitle"]}
  </h2>

  <div
    class="flex flex-col flex-wrap gap-4 md:grid md:grid-cols-3 items-center w-full"
  >
    {
      projects && projects.length > 0 ? (
        projects
          .filter((project) => project.data.purpose === "commercial")
          .map((project) => (
            <ProjectCard
              ui={t("home.projects")["card"]}
              project={project.data}
            />
          ))
      ) : (
        <NotFoundMessage />
      )
    }
  </div>
</StandardSection>

<StandardSection>
  <h2 class="text-2xl text-center md:text-left font-bold text-primary">
    {t("home.projects")["personalTitle"]}
  </h2>

  <div
    class="flex flex-col flex-wrap gap-4 md:grid md:grid-cols-3 items-center w-full"
  >
    {
      projects && projects.length > 0 ? (
        projects
          .filter((project) => project.data.purpose === "personal")
          .map((project) => (
            <ProjectCard
              ui={t("home.projects")["card"]}
              project={project.data}
            />
          ))
      ) : (
        <NotFoundMessage />
      )
    }
  </div>
</StandardSection>

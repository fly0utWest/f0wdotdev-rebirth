---
import { getCollection } from "astro:content";
import ProjectCard from "../ProjectCard.astro";
import { useTranslations } from "../../i18n/useTranslations";

const projects = await getCollection("projects");

const locale = Astro.currentLocale ?? "en";

const t = useTranslations(locale!);
---

<section class="flex flex-col gap-3">
  <h2 class="text-2xl text-center md:text-left font-bold text-primary">
    {t("home.projects")["title"]}
  </h2>

  <div
    class="flex flex-col flex-wrap gap-4 md:grid md:grid-cols-3 items-center w-full"
  >
    {
      projects && projects.length > 0 ? (
        projects.map((project) => (
          <ProjectCard ui={t("home.projects")["card"]} project={project.data} />
        ))
      ) : (
        <p class="text-destructive text-lg">{t("misc")["notFound"]}</p>
      )
    }
  </div>
</section>
